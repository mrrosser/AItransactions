import { safeLog } from '../utils'; export type CFToken={token:string,expiresAt:number}; export async function getAttestation():Promise<CFToken>{ const live=process.env.PAYMENTS_DRY_RUN!=='true'; if(!live){ const tok={token:'cf_attest_dummy',expiresAt:Date.now()+300000}; safeLog('cloudflare.attest.simulated',tok); return tok } const tok={token:'cf_attest_stub',expiresAt:Date.now()+300000}; safeLog('cloudflare.attest.live_stub',tok); return tok }
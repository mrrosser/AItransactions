import 'dotenv/config'; import { z } from 'zod'; import { payments, PaymentPlan } from '../payments'; const Arg=z.object({amount:z.coerce.number().default(500),currency:z.string().default('USDC'),to:z.string().default('cb:mlr'),rail:z.enum(['X402','CARD']).default('X402'),memo:z.string().optional()}); async function main(){const arg=Arg.parse({amount:process.argv[2],currency:process.argv[3],to:process.argv[4],rail:process.argv[5],memo:process.argv[6]}); const plan:PaymentPlan={mandate:{issuerDID:'did:example:mlr',subjectDID:'did:example:recipient',scope:'TIP',maxAmountMinor:10_000_000,currency:arg.currency,expiresAt:Date.now()+3600_000}, intent:{amountMinor:arg.amount,currency:arg.currency,memo:arg.memo,counterparty:arg.to,rail:arg.rail}}; const r=await payments.execute(plan); console.log('\nReceipt ->',r)}; main().catch(e=>{console.error(e);process.exit(1)})
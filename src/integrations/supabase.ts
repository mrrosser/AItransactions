import fetch from 'cross-fetch'; export async function supabaseSync(table:'receipts'|'mandates', row:any){ if(process.env.SUPABASE_SYNC!=='true') return; const url=process.env.SUPABASE_URL, key=process.env.SUPABASE_SERVICE_KEY; if(!url||!key) return; await fetch(`${url}/rest/v1/${table}`,{method:'POST',headers:{'apikey':key,'Authorization':`Bearer ${key}`,'Content-Type':'application/json','Prefer':'resolution=merge-duplicates'},body:JSON.stringify(row)}) }